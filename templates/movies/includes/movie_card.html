<div class="movie-card">
    <a href="{% url 'movie_detail' movie.id %}" class="movie-card-link">
        <div class="movie-card-poster">
            {% if movie.poster %}
                <img src="{{ movie.poster.url }}" alt="{{ movie.title }}" class="img-fluid rounded">
            {% else %}
                <img src="/static/img/placeholder.jpg" alt="{{ movie.title }}" class="img-fluid rounded">
            {% endif %}
            
            <div class="movie-card-overlay">
                <h5 class="movie-card-title">{{ movie.title }}</h5>
                <div class="movie-card-meta">
                    <span>{{ movie.year }}</span>
                    <span><i class="fas fa-star text-warning"></i> {{ movie.rating }}</span>
                    <span>{{ movie.duration }}</span>
                </div>
            </div>
        </div>
    </a>
    
    <div class="movie-card-actions">
        <a href="{% url 'movie_detail' movie.id %}?play=trailer" class="btn btn-sm btn-primary w-100 mb-2">
            <i class="fas fa-play me-1"></i> Watch Trailer
        </a>
        <a href="{% url 'movie_detail' movie.id %}" class="btn btn-sm btn-outline-light w-100 mb-2">
            <i class="fas fa-info-circle me-1"></i> Details
        </a>
        
        {% if user.is_authenticated %}
            <a href="{% url 'toggle_watchlist' movie.id %}" class="btn btn-sm {% if movie.id in user_watchlist %}btn-secondary{% else %}btn-outline-light{% endif %} w-100 toggle-watchlist"
               data-movie-id="{{ movie.id }}">
                {% if movie.id in user_watchlist %}
                    <i class="fas fa-check me-1"></i> In Watchlist
                {% else %}
                    <i class="fas fa-plus me-1"></i> Add to List
                {% endif %}
            </a>
        {% endif %}
    </div>
    
    {% if user.is_authenticated %}
        <button class="watchlist-toggle-icon {% if movie.id in user_watchlist %}active{% endif %}" 
                data-movie-id="{{ movie.id }}" data-url="{% url 'toggle_watchlist' movie.id %}">
            <i class="fas fa-heart"></i>
        </button>
    {% endif %}
</div>
